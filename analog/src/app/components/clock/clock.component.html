

<mat-toolbar color="primary">
  <object type="image/svg+xml" data="./assets/byu_logo.svg"></object>
  <span>Y-Time</span> <span class="header-spacer"></span>
  <span (click)="logout()">{{ emp?.name }} </span>
  <button (click)="logout()" mat-icon-button>
    <mat-icon>exit_to_app</mat-icon>
  </button>
</mat-toolbar>

<div class="container">
  <mat-card appearance="outlined" class="card totals mat-elevation-z2">
    <span><b>Week Total: </b> {{ emp?.totalWeekHours }}</span>
    <span><b>Pay Period Total: </b> {{ emp?.totalPeriodHours }}</span>
  </mat-card>

  <mat-card appearance="outlined" class="jobs card mat-elevation-z2">
    <mat-grid-list
      class="grid"
      cols="{{ emp?.showTRC() ? 6 : 5 }}"
      rowHeight="12vh"
      gutterSize=".2vh"
    >
      <!-- headers -->
      <mat-grid-tile (click)="api?.hiddenDarkMode()" colspan="1" rowspan="1" class="header title" >
        <b>Job Title</b>
      </mat-grid-tile>
      <mat-grid-tile colspan="1" rowspan="1" class="header">
        <b>Week</b>
      </mat-grid-tile>
      <mat-grid-tile colspan="1" rowspan="1" class="header">
        <b>Pay Period</b>
      </mat-grid-tile>
      <mat-grid-tile
        *ngIf="emp?.showTRC()"
        colspan="1"
        rowspan="1"
        class="tile header"
      >
        <b>TRC</b>
      </mat-grid-tile>
      <mat-grid-tile colspan="2" rowspan="1" class="header"
        ><b>Clock</b></mat-grid-tile
      >
      <!-- Primary Job -->
      <ng-container *ngFor="let Position of emp?.positions">
        <ng-container *ngIf="Position?.primaryPosition == 'true'">
          <!-- name -->
          <mat-grid-tile colspan="1" rowspan="1" style="text-align: center;">
            {{ Position?.businessTitle }}
          </mat-grid-tile>
      

          <!-- week total -->
          <mat-grid-tile colspan="1" rowspan="1">
            {{ Position?.totalWeekHours }}
          </mat-grid-tile>

          <!-- pay period total -->
          <mat-grid-tile colspan="1" rowspan="1">
            {{ Position?.totalPeriodHours }}
          </mat-grid-tile>

          <mat-grid-tile *ngIf="emp?.showTRC()" colspan="1" rowspan="1">
            {{ job?.currentTRC?.id ? job?.currentTRC?.id : "N/A" }}
          </mat-grid-tile>

          <!-- clock in/out -->
          <mat-grid-tile colspan="2" rowspan="1">
            <mat-radio-group
              class="clock-group"
              (change)="
                clockInOut(jobRef(Position.positionNumber), $event.value, $event)
              "
            >
              <mat-radio-button
                class="clock-button in"
                color="accent"
                [value]="punchType.In"
                [checked]="Position?.inStatus"
                (click)="
                  doubleClockConfirm(jobRef(job?.employeeJobID), punchType.In)
                "
                >IN</mat-radio-button
              >
              <mat-radio-button
                color = "warn"
                class="clock-button out"
                [value]="punchType.Out"
                [checked]="!Position?.inStatus"
                (click)="
                  doubleClockConfirm(jobRef(job?.employeeJobID), punchType.Out)
                "
                >OUT</mat-radio-button
              >
            </mat-radio-group>
          </mat-grid-tile>
        </ng-container>
      </ng-container>

      <!-- Non-Primary Jobs -->
      <ng-container *ngFor="let Position of emp?.positions">
        <ng-container *ngIf="Position?.primaryPosition == 'false'">
          <!-- name -->
          <mat-grid-tile colspan="1" rowspan="1" style="text-align: center;">
            {{ Position?.businessTitle }}
          </mat-grid-tile>
      

          <!-- week total -->
          <mat-grid-tile colspan="1" rowspan="1">
            {{ Position?.totalWeekHours }}
          </mat-grid-tile>

          <!-- pay period total -->
          <mat-grid-tile colspan="1" rowspan="1">
            {{ Position?.totalPeriodHours }}
          </mat-grid-tile>

          <mat-grid-tile *ngIf="emp?.showTRC()" colspan="1" rowspan="1">
            {{ job?.currentTRC?.id ? job?.currentTRC?.id : "N/A" }}
          </mat-grid-tile>

          <!-- clock in/out -->
          <mat-grid-tile colspan="2" rowspan="1">
            <mat-radio-group
              class="clock-group"
              (change)="
                clockInOut(jobRef(Position.positionNumber), $event.value, $event)
              "
            >
              <mat-radio-button
                class="clock-button in"
                color="accent"
                [value]="punchType.In"
                [checked]="Position?.inStatus"
                (click)="
                  doubleClockConfirm(jobRef(job?.employeeJobID), punchType.In)
                "
                >IN</mat-radio-button
              >
              <mat-radio-button
                color = "warn"
                class="clock-button out"
                [value]="punchType.Out"
                [checked]="!Position?.inStatus"
                (click)="
                  doubleClockConfirm(jobRef(job?.employeeJobID), punchType.Out)
                "
                >OUT</mat-radio-button
              >
            </mat-radio-group>
          </mat-grid-tile>
        </ng-container>
      </ng-container>

    </mat-grid-list>
  </mat-card>

  <button
    class="view-timesheet"
    color="accent"
    (click)="toTimesheet()"
  >
    Review Time Entry
  </button>
</div>
